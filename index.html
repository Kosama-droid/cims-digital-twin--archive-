<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>CIMS | Digital Twin</title>
  <link rel="icon" type="image/x-icon" href="static/logos/cims.ico" />
  <link rel="stylesheet" href="styles.css?v=1.1">
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@100;300;400;700&display=swap" rel="stylesheet" />
</head>

<body class="hide-overflow">
  <header>
    <nav id="top-container" class="row flex-container" >
    <a id="icdt" title="Imagine Canada's Digital Twin" href="https://canadasdigitaltwin.ca/"><img src="static/logos/icdt-logo.png" alt="Imagine Canada's Digital Twin"
       height="55px" />
    </a>
    <a id="login" name="Login" class="white-icon" title="Log in or Register">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 0c-6.627 0-12 5.373-12 12s5.373 12 12 12 12-5.373 12-12-5.373-12-12-12zm7.753 18.305c-.261-.586-.789-.991-1.871-1.241-2.293-.529-4.428-.993-3.393-2.945 3.145-5.942.833-9.119-2.489-9.119-3.388 0-5.644 3.299-2.489 9.119 1.066 1.964-1.148 2.427-3.393 2.945-1.084.25-1.608.658-1.867 1.246-1.405-1.723-2.251-3.919-2.251-6.31 0-5.514 4.486-10 10-10s10 4.486 10 10c0 2.389-.845 4.583-2.247 6.305z"/></svg>
    </a>
    <a id="home" name="Home" class="white-icon" title="Take me home">
      <svg version="1.0" xmlns="http://www.w3.org/2000/svg" " viewBox="0 0 144.000000 144.000000" >  <g transform="translate(0.000000,144.000000) scale(0.100000,-0.100000)"> <path d="M650 1425 c0 -8 -5 -15 -10 -15 -6 0 -152 -142 -325 -315 l-315 -314 0 -65 c0 -58 3 -67 30 -92 16 -16 46 -33 67 -39 l38 -11 5 -234 5 -235 29 -41 c43 -59 60 -64 231 -64 140 0 151 1 163 20 9 15 12 70 12 196 -2 231 -6 224 135 224 l104 0 16 -30 c12 -22 15 -66 15 -197 0 -92 3 -178 6 -190 6 -23 9 -23 166 -23 146 0 162 2 189 21 59 42 64 61 69 319 l5 235 41 10 c22 6 57 24 77 42 35 31 37 36 37 93 0 33 -4 60 -8 60 -11 0 -652 640 -652 651 0 5 -29 9 -65 9 -51 0 -65 -3 -65 -15z m387 -387 c245 -245 303 -308 303 -329 0 -21 -7 -29 -29 -37 -16 -6 -38 -8 -49 -5 -11 2 -32 -3 -46 -12 l-26 -17 0 -257 c0 -257 0 -258 -24 -280 -21 -20 -32 -22 -122 -19 l-99 3 -6 160 c-6 172 -10 197 -43 233 -39 44 -68 52 -185 52 -121 0 -149 -9 -193 -65 -21 -28 -23 -41 -28 -205 l-5 -175 -104 -3 c-96 -3 -106 -1 -127 19 l-24 22 0 263 0 262 -30 12 c-16 7 -37 10 -45 6 -26 -9 -75 21 -75 47 0 34 596 627 630 627 19 0 92 -67 327 -302z"/> </g> </svg>
    </a>
  </a>
  <a id="info" name="Information" class="white-icon" title="Information">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="m12.002 2.005c5.518 0 9.998 4.48 9.998 9.997 0 5.518-4.48 9.998-9.998 9.998-5.517 0-9.997-4.48-9.997-9.998 0-5.517 4.48-9.997 9.997-9.997zm0 1.5c-4.69 0-8.497 3.807-8.497 8.497s3.807 8.498 8.497 8.498 8.498-3.808 8.498-8.498-3.808-8.497-8.498-8.497zm0 6.5c-.414 0-.75.336-.75.75v5.5c0 .414.336.75.75.75s.75-.336.75-.75v-5.5c0-.414-.336-.75-.75-.75zm-.002-3c.552 0 1 .448 1 1s-.448 1-1 1-1-.448-1-1 .448-1 1-1z"></svg>
  </a>
  <a id="settings" name="Settings" class="white-icon" title="Open settings window">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M24 14.187v-4.374c-2.148-.766-2.726-.802-3.027-1.529-.303-.729.083-1.169 1.059-3.223l-3.093-3.093c-2.026.963-2.488 1.364-3.224 1.059-.727-.302-.768-.889-1.527-3.027h-4.375c-.764 2.144-.8 2.725-1.529 3.027-.752.313-1.203-.1-3.223-1.059l-3.093 3.093c.977 2.055 1.362 2.493 1.059 3.224-.302.727-.881.764-3.027 1.528v4.375c2.139.76 2.725.8 3.027 1.528.304.734-.081 1.167-1.059 3.223l3.093 3.093c1.999-.95 2.47-1.373 3.223-1.059.728.302.764.88 1.529 3.027h4.374c.758-2.131.799-2.723 1.537-3.031.745-.308 1.186.099 3.215 1.062l3.093-3.093c-.975-2.05-1.362-2.492-1.059-3.223.3-.726.88-.763 3.027-1.528zm-4.875.764c-.577 1.394-.068 2.458.488 3.578l-1.084 1.084c-1.093-.543-2.161-1.076-3.573-.49-1.396.581-1.79 1.693-2.188 2.877h-1.534c-.398-1.185-.791-2.297-2.183-2.875-1.419-.588-2.507-.045-3.579.488l-1.083-1.084c.557-1.118 1.066-2.18.487-3.58-.579-1.391-1.691-1.784-2.876-2.182v-1.533c1.185-.398 2.297-.791 2.875-2.184.578-1.394.068-2.459-.488-3.579l1.084-1.084c1.082.538 2.162 1.077 3.58.488 1.392-.577 1.785-1.69 2.183-2.875h1.534c.398 1.185.792 2.297 2.184 2.875 1.419.588 2.506.045 3.579-.488l1.084 1.084c-.556 1.121-1.065 2.187-.488 3.58.577 1.391 1.689 1.784 2.875 2.183v1.534c-1.188.398-2.302.791-2.877 2.183zm-7.125-5.951c1.654 0 3 1.346 3 3s-1.346 3-3 3-3-1.346-3-3 1.346-3 3-3zm0-2c-2.762 0-5 2.238-5 5s2.238 5 5 5 5-2.238 5-5-2.238-5-5-5z"/></svg>
  </a>  
      <div id="selectors" class="all-pointer-events">
        <a id="back" name="Back one level" class="white-icon" title="Back one level">
          <svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="m11.998 21.995c5.517 0 9.997-4.48 9.997-9.997 0-5.518-4.48-9.998-9.997-9.998-5.518 0-9.998 4.48-9.998 9.998 0 5.517 4.48 9.997 9.998 9.997zm0-1.5c-4.69 0-8.498-3.807-8.498-8.497s3.808-8.498 8.498-8.498 8.497 3.808 8.497 8.498-3.807 8.497-8.497 8.497zm4.845-6.711c.108.141.157.3.157.456 0 .389-.306.755-.749.755h-8.501c-.445 0-.75-.367-.75-.755 0-.157.05-.316.159-.457 1.203-1.554 3.252-4.199 4.258-5.498.142-.184.36-.29.592-.29.23 0 .449.107.591.291zm-7.564-.289h5.446l-2.718-3.522z"/></svg>
        </a>  
        <select id="style-select" class="selector hidden">
          <option class="option" value="none">-- select map style --</option>
        </select>
        <select id="province-select" class="selector">
          <option class="option" value="none">
            -- Province or Territory --
          </option>
        </select>
        <select id="city-select" class="selector">
          <option class="option" value="none">-- City --</option>
        </select>
        <select id="place-select" class="selector">
          <option class="option" value="none">-- Place --</option>
          <option class="option" id="add-place">(+) Add new place</option>
        </select>
        <select id="object-select" class="selector">
          <option class="option" value="none">-- Object --</option>
          <option class="option" id="add-object">(+) Add new object</option>
        </select>
      </div>
      <div id="loader-container" class="loader-container hidden">
        <div class="loader"></div>
        <a id="progress-text"></a>
      </div>
    </nav>
  </header>

  <nav id="right-container" class="column flex-container">
    <a class="white-icon" id="tools" name="Tools" title="Open tools menu">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20.715 24c-.864 0-1.711-.351-2.322-.962l-10.953-10.952c-.275-.274-.655-.432-1.044-.432l-.111.004c-1.681.129-3.373-.481-4.584-1.692-1.097-1.099-1.701-2.561-1.701-4.117 0-1.046.237-2.225.715-3.279l3.809 3.811c.436-.073.968-.393 1.405-.935.283-.35.427-.675.466-.91l-3.826-3.826c1.056-.476 2.219-.71 3.255-.71 1.533 0 3.043.601 4.143 1.702 1.208 1.209 1.823 2.88 1.69 4.584-.031.428.125.851.43 1.156l10.951 10.951c.62.621.962 1.446.962 2.322 0 1.811-1.474 3.285-3.285 3.285zm-14.319-14.343c.915 0 1.81.371 2.456 1.018l10.953 10.951c.239.24.571.377.909.377.71 0 1.288-.577 1.288-1.287 0-.344-.134-.667-.378-.911l-10.949-10.951c-.715-.716-1.083-1.707-1.009-2.718.088-1.127-.317-2.227-1.111-3.022-.493-.492-1.098-.833-1.758-1l1.49 1.491c.218 1.001.125 1.947-.804 3.097-1.002 1.243-2.292 1.932-3.88 1.586l-1.489-1.49c.167.66.508 1.266 1 1.759.796.794 1.893 1.2 3.017 1.11l.265-.01zm1.664 5.877l-4.665 4.627c-.229.229-.504.407-.79.558l-.579.302-1.026 2.145.833.834 2.101-1.07.301-.58c.15-.286.347-.545.574-.774l4.665-4.627-1.414-1.415zm7.15-7.798l4.507-4.499c.168-.17.442-.168.611 0 .168.17.169.442 0 .611l-4.507 4.5.89.89 4.507-4.5c.169-.169.441-.168.61.001.168.168.17.441.001.609l-4.508 4.5 1.039 1.039 4.767-4.759c.582-.583.873-1.346.873-2.11 0-.768-.293-1.537-.881-2.125-.584-.585-1.35-.877-2.113-.877-.766 0-1.529.293-2.113.877l-4.767 4.759 1.084 1.084zm5.49 12.464c-.276 0-.5.224-.5.5s.224.5.5.5.5-.224.5-.5-.223-.5-.5-.5z"/></svg>
    </a>
    <nav id="tools-container" class="toolbar start">
            <a class="white-icon" id="styles" name="Map styles" title="Select map style">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M8.997 13.985c.01 1.104-.88 2.008-1.986 2.015-1.105.009-2.005-.88-2.011-1.984-.01-1.105.879-2.005 1.982-2.016 1.106-.007 2.009.883 2.015 1.985zm-.978-3.986c-1.104.008-2.008-.88-2.015-1.987-.009-1.103.877-2.004 1.984-2.011 1.102-.01 2.008.877 2.012 1.982.012 1.107-.88 2.006-1.981 2.016zm7.981-4.014c.004 1.102-.881 2.008-1.985 2.015-1.106.01-2.008-.879-2.015-1.983-.011-1.106.878-2.006 1.985-2.015 1.101-.006 2.005.881 2.015 1.983zm-12 15.847c4.587.38 2.944-4.492 7.188-4.537l1.838 1.534c.458 5.537-6.315 6.772-9.026 3.003zm14.065-7.115c1.427-2.239 5.846-9.748 5.846-9.748.353-.623-.429-1.273-.975-.813 0 0-6.572 5.714-8.511 7.525-1.532 1.432-1.539 2.086-2.035 4.447l1.68 1.4c2.227-.915 2.868-1.04 3.995-2.811zm-12.622 4.806c-2.084-1.82-3.42-4.479-3.443-7.447-.044-5.51 4.406-10.03 9.92-10.075 3.838-.021 6.479 1.905 6.496 3.447l1.663-1.456c-1.01-2.223-4.182-4.045-8.176-3.992-6.623.055-11.955 5.466-11.903 12.092.023 2.912 1.083 5.57 2.823 7.635.958.492 2.123.329 2.62-.204zm12.797-1.906c1.059 1.97-1.351 3.37-3.545 3.992-.304.912-.803 1.721-1.374 2.311 5.255-.591 9.061-4.304 6.266-7.889-.459.685-.897 1.197-1.347 1.586z"/></svg>
      </a>
    </nav>

    <nav  id="layer-container"class="toolbar end">
      <a class="white-icon" id="osm" name="OSM objects" title="Show OSM objects">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
          <path
            d="M21 22h2v2h-22v-2h2v-22h18v22zm-10-3h-2v4h2v-4zm4 0h-2v4h2v-4zm4-17h-14v20h2v-5h10v5h2v-20zm-12 11h2v2h-2v-2zm4 0h2v2h-2v-2zm4 0h2v2h-2v-2zm-8-3h2v2h-2v-2zm4 0h2v2h-2v-2zm4 0h2v2h-2v-2zm-8-3h2v2h-2v-2zm4 0h2v2h-2v-2zm4 0h2v2h-2v-2zm-8-3h2v2h-2v-2zm4 0h2v2h-2v-2zm4 0h2v2h-2v-2z" />
        </svg>
      </a>
    </nav>

    <a class="white-icon" name="layers" id="layers" title="Hide layers">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
        <path
          d="M21.698 10.658l2.302 1.342-12.002 7-11.998-7 2.301-1.342 9.697 5.658 9.7-5.658zm-9.7 10.657l-9.697-5.658-2.301 1.343 11.998 7 12.002-7-2.302-1.342-9.7 5.657zm0-19l8.032 4.685-8.032 4.685-8.029-4.685 8.029-4.685zm0-2.315l-11.998 7 11.998 7 12.002-7-12.002-7z" />
      </svg>
    </a>
  </nav>

  <nav id="new-place-container" class="add-new-container hidden">
    <div id="new-place-location">province, city</div>
    <input id="place-name" class="new-item-name" type="name" name="Name" placeholder="Place Name" />
    <div class="item"><label for="place-id">Place ID:</label></div>
    <div class="item">
      <input id="place-id" type="name" name="Place ID" />
    </div>
    <div><br></div>
    <div></div>
    
      <button id="create-place" class="button">Redo place polygon</button>
      <div></div>
      <div>Place area:</div>
      <div id="calculated-area"></div>
    
    <!-- <div class="item"><label for="place-lng">Longitude:</label></div>
    <div class="item">
      <input id="place-lng" type="number" name="Longitud" />
    </div>
    <div class="item"><label for="place-lat">Latitude:</label></div>
    <div class="item">
      <input id="place-lat" type="number" name="Latitude" />
    </div>
    <div class="item">
      <label for="place-msl">Meters above sea level:</label>
    </div>
    <div class="item">
      <input id="place-msl" type="number" name="Meters above sea level:" />
    </div>
    <div class="item">
      <label for="place-msl">Rotate true north:</label>
    </div>
    <div class="item">
      <input id="place-true-north" type="range" min="0" max="359" value="0" class="slider" name="Rotate true north"
        oninput="this.nextElementSibling.value = this.value" /><output>0</output>
    </div> -->

   <div><br></div>
   <div><br></div>
      <button id="upload-place" class="button">Upload new place</button>
      <button id="cancel-new-place" class="button">Cancel</button>
  </nav>
  <nav id="new-object-container" class="add-new-container hidden">
    <div id="new-object-location">province, ontario, place</div>
    <input id="object-name" class="new-item-name" type="name" name="Name" placeholder="Object Name" />
    <div class="item"><label for="object-id">Object ID:</label></div>
    <div class="item">
      <input id="object-id" type="name" name="Object ID" />
    </div>
    <div><br></div>
    <div></div>
    <div class="item"><label for="object-lng">Longitude:</label></div>
    <div class="item">
      <input id="object-lng" type="number" name="Longitud" />
    </div>
    <div class="item"><label for="object-lat">Latitude:</label></div>
    <div class="item">
      <input id="object-lat" type="number" name="Latitude" />
    </div>
    <div class="item">
      <label for="object-msl">Meters above sea level:</label>
    </div>
    <div class="item">
      <input id="object-msl" type="number" name="Meters above sea level:" />
    </div>
    <div class="item">
      <label for="object-msl">Rotate true north:</label>
    </div>
    <div class="item">
      <input id="object-true-north" type="range" min="0" max="359" value="0" class="slider" name="Rotate true north"
        oninput="this.nextElementSibling.value = this.value" /><output>0</output>
    </div>
    <div><br></div>
    <div></div>
    <div class="item"><label for="object-glb-input">Load object 3d model:</label></div>
    <div class="item load-file">
      <input class="load-file" type="file" id="object-glb-input" accept=".glb, .gltf" />
    </div>
    <div class="item"><label for="object-ifc-input">Load object IFC:</label></div>
    <div class="item load-file">
      <input class="load-file" type="file" id="object-ifc-input" accept=".ifc" />
    </div>
    <div class="item"><br /></div>
    <div class="item"></div>
    <div class="item">
      <button id="upload-object" class="button">Upload new object</button>
    </div>
    <div class="item">
      <button id="cancel-new-object" class="button">Cancel</button>
    </div>
  </nav>
  </nav>

  <div id="full-screen-flex-container">
    <a id="message" class="centre transp1-background circular hidden"></a>
  </div>
  <div id="map-container" class="hide-overflow canvas all-pointer-events">
    <div id="map" class="map" ></div>
  </div>

  <div class="iframe-container hidden" id="iframe-container"></div>
  
  <script src="https://api.mapbox.com/mapbox-gl-js/v2.9.1/mapbox-gl.js"></script>
  <link
    href="https://api.mapbox.com/mapbox-gl-js/v2.9.1/mapbox-gl.css"
    rel="stylesheet"
  />
  <script src="https://cdn.jsdelivr.net/npm/@turf/turf@6/turf.min.js"></script>
  <script src="https://api.mapbox.com/mapbox-gl-js/plugins/mapbox-gl-draw/v1.2.2/mapbox-gl-draw.js"></script>
  
<link rel="stylesheet" href="https://api.mapbox.com/mapbox-gl-js/plugins/mapbox-gl-draw/v1.2.2/mapbox-gl-draw.css" type="text/css">

  <script src="dist/map-bundle.js"></script>
  </body>
</html>